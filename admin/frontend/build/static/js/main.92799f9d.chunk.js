(this["webpackJsonpbackend-crud"]=this["webpackJsonpbackend-crud"]||[]).push([[0],{154:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(25),s=n.n(i),r=(n(154),n(96)),o=n.n(r),l=n(105),j=n(12),d=n(53),b=(n(156),d.a.initializeApp({apiKey:"AIzaSyCzPc5yTwV7kwRWrQUqyGJjldP-AB-K9-Y",authDomain:"websitename-csc361.firebaseapp.com",projectId:"websitename-csc361",storageBucket:"websitename-csc361.appspot.com",messagingSenderId:"263414724563",appId:"1:263414724563:web:d74750a3c5ab43f2e46126",measurementId:"G-2MBXH53V8D"})),u=d.a.auth(),h=function(){d.a.auth().signOut().then((function(){console.log("signOut")})).catch((function(e){console.log(e)}))},x=new d.a.auth.GoogleAuthProvider;x.setCustomParameters({prompt:"select_account"});var O=new d.a.auth.FacebookAuthProvider;O.setCustomParameters({prompt:"select_account"});var m=new d.a.auth.GithubAuthProvider;m.setCustomParameters({prompt:"select_account"});var p=function(){return u.signInWithPopup(x)},f=function(){return u.signInWithPopup(O)},g=function(){return u.signInWithPopup(m)},y=b,v=n(42),w=n(16),C=n(235),S=n(268),D=n(237),k=n(238),I=n(260),P=n(240),A=n(242),E=n(117),T=n.n(E),F=n(119),N=n.n(F),B=n(118),R=n.n(B),U=n(115),W=n.n(U),z=n(239),G=n(2),L=Object(C.a)((function(e){return{title:{flexGrow:1}}})),_=function(e){var t=e.session,n=L();return Object(G.jsx)(S.a,{position:"static",children:Object(G.jsxs)(D.a,{children:[Object(G.jsx)(k.a,{variant:"h6",className:n.title,children:Object(G.jsx)(v.b,{to:"/",style:{textDecoration:"none",color:"white"},children:"R\u0101ningu Developer"})}),Object(G.jsx)(z.a,{children:"admin"===t.level?Object(G.jsxs)(z.a,{position:"flex",children:[Object(G.jsx)(I.a,{title:"Documentation",style:{textDecoration:"none",color:"white"},children:Object(G.jsx)(v.b,{to:"/docs",children:Object(G.jsx)(P.a,{children:Object(G.jsx)(W.a,{style:{fill:"white"}})})})}),Object(G.jsx)(I.a,{title:"Admin Console",style:{textDecoration:"none",color:"white"},children:Object(G.jsx)(v.b,{to:"/admin",children:Object(G.jsx)(P.a,{children:Object(G.jsx)(T.a,{style:{fill:"white"}})})})}),Object(G.jsx)(I.a,{title:"Sign Out",children:Object(G.jsx)(P.a,{onClick:h,children:Object(G.jsx)(R.a,{style:{fill:"white"}})})})]}):Object(G.jsxs)(z.a,{position:"flex",children:[Object(G.jsx)(v.b,{to:"/docs",style:{textDecoration:"none",color:"white"},children:Object(G.jsx)(A.a,{variant:"text",color:"inherit",children:"Documentation"})}),"|",Object(G.jsx)(I.a,{title:"Sign In (Administrator)",children:Object(G.jsx)(v.b,{to:"/signin",children:Object(G.jsx)(P.a,{children:Object(G.jsx)(N.a,{style:{fill:"white"}})})})})]})})]})})},q=n(269),J=n(270),V=n(274),M=n(248),H=n(271),K=n(272),Y=n(258),Q=n(257),X=n(275),Z=n(276),$=n(277),ee=n(278),te=n(279),ne=n(280),ae=n(265),ce=n(122),ie=n(264),se=n(281),re=n(259),oe=n(263),le=n(243),je=n(244),de=n(245),be=n(246),ue=n(247),he=n(252),xe=n(253),Oe=n(254),me=n(54),pe=n.n(me),fe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,borderRadius:5},ge=Object(C.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},container:{marginTop:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary}}})),ye=function(e){switch(e){case"google.com":return Object(G.jsx)(le.a,{style:{fill:"rgb(46, 46, 46)"}});case"facebook.com":return Object(G.jsx)(je.a,{style:{fill:"rgb(46, 46, 46)"}});case"github.com":return Object(G.jsx)(de.a,{style:{fill:"rgb(46, 46, 46)"}});case"password":return Object(G.jsx)(be.a,{style:{fill:"rgb(46, 46, 46)"}});default:return e}};function ve(e){e.session;var t=c.a.useState(null),n=Object(j.a)(t,2),i=n[0],s=n[1],r=c.a.useState(!1),o=Object(j.a)(r,2),l=o[0],d=o[1],b=c.a.useState(!0),u=Object(j.a)(b,2),h=u[0],x=u[1],O=c.a.useState(!1),m=Object(j.a)(O,2),p=m[0],f=m[1],g=c.a.useState(!1),y=Object(j.a)(g,2),v=y[0],w=y[1],C=Boolean(i),S=function(e){return s(e.currentTarget)},D=function(){return s(null)},k=function(e,t){"clickaway"!==t&&d(!1)};pe()(document).ready((function(){pe()("#searchId").on("keyup",(function(){var e=pe()(this).val().toLowerCase();pe()("#tableUser tr").filter((function(){pe()(this).toggle(pe()(this).text().toLowerCase().indexOf(e)>-1)}))}))}));var I=Object(G.jsx)(c.a.Fragment,{children:Object(G.jsx)(q.a,{size:"small","aria-label":"close",color:"inherit",onClick:k,children:Object(G.jsx)(ue.a,{fontSize:"small"})})}),P=ge(),A=Object(a.useState)([]),E=Object(j.a)(A,2),T=E[0],F=E[1];Object(a.useEffect)((function(){N()}),[]);var N=function(){x(!0),f(!1),fetch("https://raningu-api.glitch.me/data/auth/get_user",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){F(e)})).then((function(){x(!1),f(!0)}))};return Object(G.jsxs)("div",{className:P.root,children:[Object(G.jsx)(J.a,{className:P.container,maxWidth:"lg",children:Object(G.jsxs)(V.a,{className:P.paper,children:[Object(G.jsxs)(M.a,{display:"flex",children:[Object(G.jsx)(M.a,{flexGrow:1,children:Object(G.jsx)(H.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Users in application (Raningu)"})}),Object(G.jsx)(M.a,{children:Object(G.jsx)("a",{target:"_blank",href:"https://console.firebase.google.com/u/2/project/websitename-csc361/authentication/users",rel:"noreferrer",style:{textDecoration:"none"},children:Object(G.jsx)(K.a,{variant:"contained",color:"primary",children:"FIREBASE CONSOLE"})})})]}),Object(G.jsxs)(M.a,{sx:{display:"flex",margin:2},children:[Object(G.jsx)(Y.a,{style:{width:"50%"},id:"searchId",label:"Search",variant:"standard"}),Object(G.jsx)(Q.a,{title:"Refresh",onClick:N,children:Object(G.jsx)(q.a,{children:Object(G.jsx)(he.a,{style:{fill:"rgb(46, 46, 46)"}})})})]}),p&&Object(G.jsx)(X.a,{component:V.a,children:Object(G.jsxs)(Z.a,{id:"tableUser",className:P.table,"aria-label":"simple table",children:[Object(G.jsx)($.a,{children:Object(G.jsxs)(ee.a,{children:[Object(G.jsx)(te.a,{align:"center",children:"Avatar"}),Object(G.jsx)(te.a,{align:"left",children:"Display Name"}),Object(G.jsx)(te.a,{align:"left",children:"E-mail"}),Object(G.jsx)(te.a,{align:"center",children:"Provider ID"}),Object(G.jsx)(te.a,{align:"center",children:"UID"}),Object(G.jsx)(te.a,{align:"center"})]})}),Object(G.jsxs)(ne.a,{children:[T.map((function(e){return Object(G.jsxs)(ee.a,{children:[Object(G.jsx)(te.a,{align:"center",children:Object(G.jsx)(M.a,{display:"flex",justifyContent:"center",children:Object(G.jsx)(ae.a,{src:e.photoURL})})}),Object(G.jsx)(te.a,{align:"left",children:e.displayName}),Object(G.jsx)(te.a,{align:"left",children:e.email}),Object(G.jsx)(te.a,{align:"center",children:ye(e.providerData[0].providerId)}),Object(G.jsx)(te.a,{align:"center",children:e.uid}),Object(G.jsxs)(te.a,{align:"center",children:[Object(G.jsx)(Q.a,{title:"Copy UID",children:Object(G.jsx)(q.a,{children:Object(G.jsx)(xe.a,{style:{fill:"rgb(46, 46, 46)"},onClick:function(){return t=e.uid,navigator.clipboard.writeText(t),void d(!0);var t}})})}),Object(G.jsx)(Q.a,{title:"View more options",onClick:S,children:Object(G.jsx)(q.a,{children:Object(G.jsx)(Oe.a,{style:{fill:"rgb(46, 46, 46)"}})})})]})]},e.uid)})),Object(G.jsxs)(ce.a,{id:"basic-menu",anchorEl:i,open:C,onClose:D,MenuListProps:{"aria-labelledby":"basic-button"},children:[Object(G.jsx)(ie.a,{onClick:D,children:"Reset Password"}),Object(G.jsx)(ie.a,{onClick:D,children:"Disable Account"}),Object(G.jsx)(ie.a,{onClick:function(){return w(!0)},children:"Delete Account"})]})]})]})}),h&&Object(G.jsx)(M.a,{sx:{display:"flex",justifyContent:"center"},children:Object(G.jsx)(se.a,{})})]})}),Object(G.jsx)(re.a,{open:v,onClose:function(){return w(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(G.jsxs)(M.a,{sx:fe,children:[Object(G.jsx)(H.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Delete account"}),Object(G.jsx)(q.a,{children:Object(G.jsx)(ue.a,{})}),Object(G.jsx)(H.a,{id:"modal-modal-description",sx:{mt:2},children:"Duis mollis, est non commodo luctus, nisi erat porttitor ligula."})]})}),Object(G.jsx)(oe.a,{open:l,autoHideDuration:3e3,onClose:k,message:"Copy UID Successfully!",action:I})]})}var we=n(255),Ce=n(261),Se=n(273),De=n(266),ke=n(121),Ie=n.n(ke),Pe=n(99),Ae=n(267),Ee=n(256),Te=Object(Pe.a)();function Fe(e){var t=e.session;a.useEffect((function(){var e=t.level;"normal"===e?(console.log("normal"),h()):"admin"===e?(console.log("admin"),w.a):"access"===e?(console.log("access"),u()):"error"===e&&(console.log("error"),b())}));var n=a.useState(!1),c=Object(j.a)(n,2),i=c[0],s=c[1],r=a.useState(""),o=Object(j.a)(r,2),l=o[0],d=o[1],b=function(){s(!0),d("Email/Password Incorrect!")},u=function(){s(!0),d("Access denied! - (You are not an administrator)")},h=function(){s(!1)};return Object(G.jsx)(Ae.a,{theme:Te,children:Object(G.jsxs)(J.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(we.a,{}),Object(G.jsxs)(M.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(G.jsx)(ae.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(G.jsx)(Ie.a,{})}),Object(G.jsx)(H.a,{component:"h1",variant:"h5",children:"Sign in (Administrator Only)"}),Object(G.jsxs)(M.a,{component:"form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);if(""===t.get("email")||""===t.get("password"))return s(!0),void d("Email/Password required!");console.log({email:t.get("email"),password:t.get("password")}),h()},noValidate:!0,sx:{mt:1},children:[Object(G.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(G.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),i&&Object(G.jsx)(Ce.a,{severity:"error",children:l}),Object(G.jsx)(K.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(G.jsxs)(De.a,{container:!0,children:[Object(G.jsx)(De.a,{item:!0,xs:!0,children:Object(G.jsx)(Se.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(G.jsx)(De.a,{item:!0,children:Object(G.jsx)(Se.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(G.jsx)(Ee.a,{style:{margin:"20px"}}),Object(G.jsxs)(De.a,{container:!0,justifyContent:"center",spacing:5,children:[Object(G.jsx)(De.a,{item:!0,children:Object(G.jsx)(q.a,{size:"large",onClick:p,children:Object(G.jsx)(le.a,{})})}),Object(G.jsx)(De.a,{item:!0,children:Object(G.jsx)(q.a,{size:"large",onClick:f,children:Object(G.jsx)(je.a,{})})}),Object(G.jsx)(De.a,{item:!0,children:Object(G.jsx)(q.a,{size:"large",onClick:g,children:Object(G.jsx)(de.a,{})})})]})]})]})]})})}function Ne(){var e={user:null,level:"normal"},t=Object(a.useState)(e),n=Object(j.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y.auth().onAuthStateChanged((function(t){t||i(e),fetch("http://localhost:3000/data/auth/admin_login",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if("success"!==e.result)return"access"===e.detail?(h(),console.log("access"),i({level:"access"})):(h(),console.log("error"),i({level:"error"}));i({level:"admin"})})),i({user:t})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsx)(v.a,{children:Object(G.jsxs)("div",{className:"app-container",children:[Object(G.jsx)(_,{session:c}),Object(G.jsxs)(w.d,{children:[Object(G.jsx)(w.b,{exact:!0,path:"/"}),Object(G.jsx)(w.b,{exact:!0,path:"/docs"}),Object(G.jsx)(w.b,{exact:!0,path:"/signin",element:"admin"!==c.level?Object(G.jsx)(Fe,{session:c}):Object(G.jsx)(w.a,{to:"/admin"})}),Object(G.jsx)(w.b,{exact:!0,path:"/admin",element:"admin"===c.level?Object(G.jsx)(ve,{session:c}):Object(G.jsx)(w.a,{to:"/"})})]})]})})}var Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,284)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};s.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(Ne,{})}),document.getElementById("root")),Be()}},[[164,1,2]]]);
//# sourceMappingURL=main.92799f9d.chunk.js.map